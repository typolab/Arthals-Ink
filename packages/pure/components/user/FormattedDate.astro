---
import type { HTMLAttributes } from 'astro/types'

import { cn, getFormattedDate } from '../../utils'

type Props = HTMLAttributes<'time'> & {
  date: Date
  dateTimeOptions?: Intl.DateTimeFormatOptions
  class?: string
}

const { date, dateTimeOptions, class: className, ...attrs } = Astro.props

const postDate = getFormattedDate(
  date,
  dateTimeOptions ?? {
    timeZone: 'Asia/Shanghai',
    year: 'numeric',
    month: '2-digit',
    day: '2-digit',
    hour: '2-digit',
    minute: '2-digit',
    // second: '2-digit', // 想显示秒就打开
    hour12: false
  }
)

---

<span class={cn('text-muted-foreground font-mono', className)} {...attrs}>
  <time datetime={date.toISOString()}>
    {postDate}
  </time>
</span>
