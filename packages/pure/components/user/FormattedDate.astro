---
import type { HTMLAttributes } from "astro/types";
import { cn } from "../../utils";

type Props = HTMLAttributes<"time"> & {
  date: Date;
  dateTimeOptions?: Intl.DateTimeFormatOptions;
  class?: string;
};

const { date, dateTimeOptions, class: className, ...attrs } = Astro.props;

const defaultOptions: Intl.DateTimeFormatOptions = {
  timeZone: "Asia/Shanghai",
  year: "numeric",
  month: "2-digit",
  day: "2-digit",
  hour: "2-digit",
  minute: "2-digit",
  // second: "2-digit", // 想要秒就打开
  hour12: false,
};

const postDate = new Intl.DateTimeFormat(
  "zh-CN",
  dateTimeOptions ? { ...defaultOptions, ...dateTimeOptions } : defaultOptions
).format(date);
---

<time
  class={cn("text-muted-foreground font-mono", className)}
  datetime={date.toISOString()}
  {...attrs}
>
  {postDate}
</time>
